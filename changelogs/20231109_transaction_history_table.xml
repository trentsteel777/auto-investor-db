<?xml version="1.0" encoding="UTF-8"?>  
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xmlns:pro="http://www.liquibase.org/xml/ns/pro"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd
        http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-latest.xsd">

<changeSet id="14" author="trentsteel777">
		<createTable tableName="TRANSACTION_TYPES">
			<column name="ID" type="SERIAL">
				<constraints primaryKey="true"/>
			</column>
			<column name="NAME" type="VARCHAR(255)">
				<constraints nullable="false"/>
			</column>
		</createTable>
		<rollback>
			<dropTable tableName="TRANSACTION_TYPES"/>
		</rollback>
	</changeSet>
	
	<changeSet id="15" author="trentsteel777">
		<sql dbms="postgresql" splitStatements="false">
			ALTER SEQUENCE transaction_types_id_seq MINVALUE 0 START 0 RESTART WITH 0;
		</sql>
		<rollback>
			<sql>
				ALTER SEQUENCE transaction_types_id_seq MINVALUE 1 START 1 RESTART WITH 1;
			</sql>
		</rollback>
	</changeSet>
	
	<changeSet id="16" author="trentsteel777">
		<insert tableName="TRANSACTION_TYPES">
			<column name="ID" valueNumeric="1"/>
			<column name="NAME" value="OPEN_SHORT_CALL"/>
		</insert>
		<insert tableName="TRANSACTION_TYPES">
			<column name="ID" valueNumeric="2"/>
			<column name="NAME" value="OPEN_LONG_CALL"/>
		</insert>
		<insert tableName="TRANSACTION_TYPES">
			<column name="ID" valueNumeric="3"/>
			<column name="NAME" value="OPEN_SHORT_PUT"/>
		</insert>
		<insert tableName="TRANSACTION_TYPES">
			<column name="ID" valueNumeric="4"/>
			<column name="NAME" value="OPEN_LONG_PUT"/>
		</insert>
		<insert tableName="TRANSACTION_TYPES">
			<column name="ID" valueNumeric="5"/>
			<column name="NAME" value="CLOSE_SHORT_CALL"/>
		</insert>
		<insert tableName="TRANSACTION_TYPES">
			<column name="ID" valueNumeric="6"/>
			<column name="NAME" value="CLOSE_LONG_CALL"/>
		</insert>
		<insert tableName="TRANSACTION_TYPES">
			<column name="ID" valueNumeric="7"/>
			<column name="NAME" value="CLOSE_SHORT_PUT"/>
		</insert>
		<insert tableName="TRANSACTION_TYPES">
			<column name="ID" valueNumeric="8"/>
			<column name="NAME" value="CLOSE_LONG_PUT"/>
		</insert>
		<insert tableName="TRANSACTION_TYPES">
			<column name="ID" valueNumeric="9"/>
			<column name="NAME" value="CASH_DEPOSIT"/>
		</insert>
		<insert tableName="TRANSACTION_TYPES">
			<column name="ID" valueNumeric="10"/>
			<column name="NAME" value="CASH_WITHDRAWAL"/>
		</insert>
		<insert tableName="TRANSACTION_TYPES">
			<column name="ID" valueNumeric="11"/>
			<column name="NAME" value="COMMISSION"/>
		</insert>
		<rollback>
			<delete tableName="TRANSACTION_TYPES">
				<where> NAME IN ('OPEN_SHORT_CALL', 'OPEN_LONG_CALL', 'OPEN_SHORT_PUT', 'OPEN_LONG_PUT', 'CLOSE_SHORT_CALL', 'CLOSE_LONG_CALL', 'CLOSE_SHORT_PUT','CLOSE_LONG_PUT', 'CASH_DEPOSIT', 'CASH_WITHDRAWAL', 'COMMISSION') </where>
			</delete>
		</rollback>
	</changeSet>

	<changeSet id="17" author="trentsteel777">
		<createTable tableName="TRANSACTION_HISTORY">
			<column name="ID" type="SERIAL">
				<constraints primaryKey="true"/>
			</column>
			<column name="ACCOUNT_NUMBER_ID" type="BIGINT">
				<constraints foreignKeyName="TRANSACTION_HISTORY_ACCOUNT_NUMBER_ID_FK" referencedTableName="ACCOUNTS" referencedColumnNames="ID" nullable="false"/>
			</column>
			<column name="TRANSACTION_DATETIME" type="TIMESTAMP">
				<constraints nullable="false"/>
			</column>
			<column name="TRANSACTION_TYPE_ID" type="BIGINT">
				<constraints foreignKeyName="TRANSACTION_HISTORY_TRANSACTION_TYPE_ID_FK" referencedTableName="TRANSACTION_TYPES" referencedColumnNames="ID" nullable="false"/>
			</column>
			<column name="AMOUNT" type="NUMERIC(15,4)">
				<constraints nullable="false"/>
			</column>
			<column name="DESCRIPTION" type="VARCHAR(255)">
				<constraints nullable="true"/>
			</column>
			<column name="CREATED_DATE" type="DATE">
				<constraints nullable="false"/>
			</column>
			<column name="MODIFIED_DATE" type="DATE"/>
		</createTable>
		<rollback>
			<dropTable tableName="TRANSACTION_HISTORY"/>
		</rollback>
	</changeSet>
	
	<changeSet id="18" author="trentsteel777">
		<insert tableName="TRANSACTION_HISTORY">
			<column name="ID" valueNumeric="1"/>
			<column name="ACCOUNT_NUMBER_ID" valueNumeric="1"/>
			<column name="TRANSACTION_DATETIME" valueDate="CURRENT_TIMESTAMP"/>
			<column name="TRANSACTION_TYPE_ID" valueNumeric="2"/>
			<column name="AMOUNT" valueNumeric="100000.00"/>
			<column name="DESCRIPTION" value="Initial deposit of $100,000"/>
			<column name="CREATED_DATE" valueDate="CURRENT_DATE"/>
			<column name="MODIFIED_DATE"/>
		</insert>
		<rollback>
			<delete tableName="TRANSACTION_HISTORY">
				<where> ACCOUNT_NUMBER_ID='1' </where>
			</delete>
		</rollback>
	</changeSet>
	
</databaseChangeLog>